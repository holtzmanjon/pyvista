IMRED module
************

imred is a module that implements some classes/tools for basic data reduction:
overscan subraction, bias subtraction, dark subtraction, and flat fielding.
An object class is included for basic combination of images that
can be used to make basic calibration products.  Data are read and
processed using NDData structures, which carry along both the image
data and an associated uncertainty array.

The routines are implemented with two basic classes:

- imred.Reducer : reads data from disk and does various reduction 
  steps, either individually or as a group

- imred.Combiner : given a Reducer, reads and reduces a set of input frames, 
  and combines them to a single frame (median or sum)

In more detail:

Reducer
=======
Given information about instrument detector, reads and reduces
images. A class is instantiated for a given instrument. Neceeary information
can be specified on instantiation, but generall is loaded given an input
instrument name, e.g., ARCTIC, ARCES, DIS, TSPEC. For a given instrument,
if there are multiple frames (e.g., DIS blue/red), the multiple configurations
are specified, and the frames are both read, and returned as a list of
NDData objects.

Attributes:

  - dir : default directory to read images from (can be overridden)
  - root : default root file name (can be overridden)
  - formstr : format string used to search for images using sequence number
  - verbose : turns on verbose output
  - gain : gain to use to calculate initial uncertainty
  - rn  : readout noise used to calculate initial uncertainty
  - biastype : specifies algorithm for bias subtraction
  - biasbox : pyvista BOX object giving region(s) to use for overscan
  - trimbox : pyvista BOX object giving region(s) to trim reduced image to, if requested
  - normbox : pyvista BOX object giving region(s) to use for normalization of flats

Methods :
  - rd:  reads image from disk. For convenience, files can be identified by a 
    sequence number alone, and the input directory will be searched for files matching
    the input format (from formstr) with the input file number
  - overscan : subtracts overscane
  - bias : subtracts input superbias frame
  - flat : divides by input superflat frame
  - reduce :  reads, overscan subtracts (per biastype), bias subtracts if
             given a superbias, flat fields if given a superflat

Combiner
========
Attributes:

  - reducer : a Reducer object
  - verbose : turns on/off more verbose output

Methods:

  - getcube: reads a set of frames into a data cube
  - median:  median filters images in cube
  - sum: :   sums images in cube
  - superbias: given input bias frames, creates superbias with 
    median combination after overscan subtraction
  - superflat: given input flat field frames, creates superbias
    with median combination with normalization, after overscan
    subtraction, and bias subtraction if given superbias
  - specflat: creates flat field as above, but then removes
    structure along columns using spectral signature calculated from
    a boxcar filter of a central set of rows, to produce a flat
    field with spectral signature removed

imred functions
===============
.. automodule:: pyvista.imred
   :members:
   :member-order: bysource

